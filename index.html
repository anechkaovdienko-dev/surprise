<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–°—é—Ä–ø—Ä–∏–∑</title>

<script type="module">
import confetti from "https://cdn.skypack.dev/canvas-confetti";

// ---------- –õ–æ–≥–∏–∫–∞ –°–ª–∞–π–¥–æ–≤ ----------
const images = [
  "https://i.ibb.co/4ZCLJXQ3/IMG-5523.jpg",
  "https://i.ibb.co/bjJzsQdL/IMG-5525.jpg"
];

let current = 0;
let autoSlideTimeout = null;

function renderImagesIfNeeded() {
  const slidesContainer = document.getElementById("slides");
  if (slidesContainer.querySelectorAll(".img").length === 0) {
    images.forEach(src => {
      const img = document.createElement("img");
      img.src = src;
      img.className = "img";
      slidesContainer.querySelector(".slide-wrapper").appendChild(img);
    });
  }
}

function showImage(idx) {
  renderImagesIfNeeded();
  const slidesContainer = document.getElementById("slides");
  const imgList = slidesContainer.querySelectorAll(".img");
  imgList.forEach((img, i) => {
    if (i === idx) img.classList.add("active");
    else img.classList.remove("active");
  });
}

function showPrev() {
  current = (current - 1 + images.length) % images.length;
  showImage(current);
  setupAutoSlide();
}

function showNext() {
  current = (current + 1) % images.length;
  showImage(current);
  setupAutoSlide();
}

function setupAutoSlide() {
  clearAutoSlide();
  autoSlideTimeout = setTimeout(function autoSlideFn() {
    current = (current + 1) % images.length;
    showImage(current);
    autoSlideTimeout = setTimeout(autoSlideFn, 5000);
  }, 5000);
}

function clearAutoSlide() {
  if (autoSlideTimeout) clearTimeout(autoSlideTimeout);
}

// ---------- –õ–æ–≥–∏–∫–∞ –û—Ç–∫—Ä—ã—Ç–∏—è (–ß–∏—Å—Ç—ã–π JavaScript) ----------

const CORRECT_PASS = "2802";

function claim() {
    // 1. –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª –ø–∞—Ä–æ–ª—è
    document.getElementById('mainContent').hidden = true;
    document.getElementById('passwordModal').style.display = 'flex';
    document.getElementById('passwordInput').value = '';
    document.getElementById('passwordInput').focus();
}

function startConfettiAndSlides() {
    const emoji = document.getElementById('giftEmoji');
    const claimBtn = document.getElementById('claimBtn');
    const message = document.getElementById('giftMessage');
    const mainContent = document.getElementById('mainContent');
    const slidesContainer = document.getElementById("slides");

    // 1. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –æ–±—Ä–∞—Ç–Ω–æ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
    mainContent.hidden = false;
    
    // 2. –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã–≤–∞–Ω–∏—è
    emoji.classList.remove("joggle");
    void emoji.offsetWidth;
    emoji.classList.add("gift-box__emoji--claimed");
    claimBtn.hidden = true;

    // 3. –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–∞–π–¥—ã
    setTimeout(() => {
        message.classList.remove("gift-box__message--hidden");
        emoji.hidden = true;
        
        // üî• –ö–æ–Ω—Ñ–µ—Ç—Ç–∏
        const confettiLayer = document.createElement("canvas");
        confettiLayer.style.position = "fixed";
        confettiLayer.style.top = 0;
        confettiLayer.style.left = 0;
        confettiLayer.style.width = "100vw";
        confettiLayer.style.height = "100vh";
        confettiLayer.style.pointerEvents = "none";
        confettiLayer.style.zIndex = "10001";
        document.body.appendChild(confettiLayer);

        confetti.create(confettiLayer, { resize: true })({
            particleCount: 200,
            spread: 100,
            origin: { y: 0.25 }
        });

        // –ü–æ–∫–∞–∑ —Å–ª–∞–π–¥–æ–≤
        slidesContainer.style.display = "flex";
        
        // !!! –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ú–´ –°–ö–†–´–í–ê–ï–ú –ö–û–†–û–ë–ö–£ –¢–û–õ–¨–ö–û –ü–û–¢–û–ú, –ß–¢–û–ë–´ –£–í–ò–î–ï–¢–¨ –°–õ–ê–ô–î–´
        setTimeout(() => {
            mainContent.hidden = true; 
        }, 100); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã slides —Ç–æ—á–Ω–æ –ø–µ—Ä–µ–∫—Ä—ã–ª–∏ mainContent

        current = 0;
        showImage(current);
        setupAutoSlide();
        
    }, 500);
}


function checkPassword() {
    const passwordInput = document.getElementById('passwordInput');
    const userPass = passwordInput.value;

    if (userPass.length !== 4) {
        alert("–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–æ–≤–Ω–æ 4 —Ü–∏—Ñ—Ä—ã.");
        return;
    }

    if (userPass !== CORRECT_PASS) {
        alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
        passwordInput.value = '';
        return;
    }

    // –ü–∞—Ä–æ–ª—å –≤–µ—Ä–Ω—ã–π: –°–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
    document.getElementById('passwordModal').style.display = 'none';
    startConfettiAndSlides();
}

function handleKeydown(event) {
    if (event.key === 'Enter') {
        checkPassword();
    }
}

document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("prevBtn").addEventListener("click", showPrev);
    document.getElementById("nextBtn").addEventListener("click", showNext);
    document.getElementById("claimBtn").addEventListener("click", claim);
    document.getElementById("modalOpenBtn").addEventListener("click", checkPassword);
    document.getElementById("passwordInput").addEventListener("keydown", handleKeydown);
});

</script>

<style>
body {
  font-family: "Lucida Grande", sans-serif;
  margin: 0;
  background: #ffe6f0;
  overflow: hidden;
}

/* ---------- –ö–æ—Ä–æ–±–∫–∞ (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä) ---------- */
.mt-40 { margin-top: 5rem; text-align: center; }
.joggle { animation: joggle 4.5s ease-in-out infinite; }
.gift-box__emoji { font-size: 13em; }
.gift-box__btn {
  font-size: 2em;
  margin-top: 1em;
  background: red;
  color: white;
  border: none;
  padding: 14px 28px;
  border-radius: 14px;
  cursor: pointer;
}
.gift-box__emoji--claimed { transition: transform 500ms ease; transform: scale(1.6) rotate(12deg); }
.gift-box__message { margin-top: 1.5em; font-size: 2em; transition: all 500ms ease; }
.gift-box__message--hidden { opacity: 0; transform: scale(0.95); }
@keyframes joggle { 0%,33%,100%{transform:rotate(0deg);} 3.33%{transform:rotate(-10deg);} 6.67%{transform:rotate(12deg);} 10%{transform:rotate(-10deg);} 13.33%{transform:rotate(9deg);} 16.67%{transform:rotate(0deg);} }

/* ------------------------------------------------------------------ */
/* –°–¢–ò–õ–ò –î–õ–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –ü–ê–†–û–õ–Ø */
#passwordModal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    /* –ò–ó–ú–ï–ù–ï–ù–ò–ï: –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–æ */
    display: none; 
}

.password-box {
    background: white;
    padding: 30px;
    border-radius: 14px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    font-size: 1.2em;
}

.password-box p {
    margin-top: 0;
    font-size: 1.5em;
    color: #333;
}

#passwordInput {
    font-size: 2em;
    width: 120px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è 4-—Ö —Ü–∏—Ñ—Ä */
    text-align: center;
    padding: 10px 5px;
    margin-bottom: 20px;
    border: 2px solid #ccc;
    border-radius: 8px;
    letter-spacing: 5px; /* –î–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Ü–∏—Ñ—Ä */
}

.password-box button {
    font-size: 1.2em;
    background: red;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
}
/* ------------------------------------------------------------------ */


/* ---------- –°–ª–∞–π–¥—ã ‚Äî –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω ---------- */
#slides {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background: #ffe6f0;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  z-index: 9999;
}

/* –ö–û–ù–¢–ï–ô–ù–ï–†-–û–ë–ï–†–¢–ö–ê –î–õ–Ø –ö–ê–†–¢–ò–ù–ö–ò –ò –ö–ù–û–ü–û–ö */
.slide-wrapper {
  position: relative; 
  width: 90%;
  height: 90%;
  display: flex;
  justify-content: center;
  align-items: center;
  
  /* –¢–û–ù–ö–ê–Ø "–ë–ï–õ–ê–Ø –†–ê–ú–ö–ê" –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ */
  padding: 0 10px; 
}

.img {
  position: absolute;
  width: 100%; 
  height: 100%;
  object-fit: contain;
  opacity: 0;
  transition: opacity 1s ease;
}
.img.active { opacity: 1; }

/* ---------- –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è ‚Äî –∫—Ä–∞—Å–Ω—ã–µ ---------- */
.navbtn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: red;
  color: white;
  border: none;
  /* –ú–ê–õ–ï–ù–¨–ö–ò–ô –†–ê–ó–ú–ï–† –ö–ù–û–ü–ö–ò */
  font-size: 24px; 
  border-radius: 14px;
  /* –£–ú–ï–ù–¨–®–ï–ù–ù–´–ô PADDING */
  padding: 0 10px; 
  cursor: pointer;
  z-index: 10000;
  opacity: 0.8;
}
.navbtn:hover { opacity: 1; }

/* –ö–Ω–æ–ø–∫–∏ –ø—Ä–∏–∂–∏–º–∞—é—Ç—Å—è –∫ –∫—Ä–∞—é –¢–û–ù–ö–û–ô –†–ê–ú–ö–ò */
#prevBtn { left: 0; }   
#nextBtn { right: 0; }

/* ---------- –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ ---------- */
@media (max-width: 600px) {
    /* –£–ú–ï–ù–¨–®–ï–ù–ê –ú–û–ë–ò–õ–¨–ù–ê–Ø –†–ê–ú–ö–ê */
    .slide-wrapper {
      padding: 0 5%; 
    }
    
  .navbtn {
    /* –ú–ê–õ–ï–ù–¨–ö–ò–ô –†–ê–ó–ú–ï–† –ö–ù–û–ü–ö–ò */
    font-size: 20px;
    padding: 0 8px;
    opacity: 0.5;
  }
  
  /* –ö–Ω–æ–ø–∫–∏ –ø—Ä–∏–∂–∏–º–∞—é—Ç—Å—è –∫ –∫—Ä–∞—é –¢–û–ù–ö–û–ô –†–ê–ú–ö–ò */
  #prevBtn { left: 0; }   
  #nextBtn { right: 0; }
  
  .gift-box__emoji { font-size: 9em; }
  .gift-box__btn { font-size: 1.5em; }
  
  /* –ê–î–ê–ü–¢–ê–¶–ò–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• */
  .password-box {
      padding: 20px;
  }
  .password-box p {
      font-size: 1.2em;
  }
  #passwordInput {
      font-size: 1.5em;
      width: 100px;
  }
}
</style>
</head>

<body>
<!-- –ò–ó–ú–ï–ù–ï–ù–ò–ï: –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤–∏–¥–∏–º–æ (—É–±—Ä–∞–Ω–æ hidden) -->
<div id="mainContent" class="mt-40">
  <div class="gift-box">
    <div id="giftEmoji" class="gift-box__emoji joggle">üéÅ</div>
    <button id="claimBtn" class="gift-box__btn">
      –ù–ï –û–¢–ö–†–´–í–ê–ô –ö–û–†–û–ë–ö–£!
    </button>
  </div>
  
  <div id="giftMessage" class="gift-box__message gift-box__message--hidden"></div>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –ü–ê–†–û–õ–Ø (–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–æ) -->
<div id="passwordModal">
    <div class="password-box">
        <p>–°–∞–º–∞—è –≤–∞–∂–Ω–∞—è –¥–ª—è –º–µ–Ω—è –¥–∞—Ç–∞ (4 —Ü–∏—Ñ—Ä—ã):</p>
        <input 
            type="password" 
            id="passwordInput" 
            maxlength="4" 
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
        >
        <button id="modalOpenBtn">–û—Ç–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<!-- ---------- –°–ª–∞–π–¥—ã ---------- -->
<div id="slides" style="display: none;">
  <div class="slide-wrapper">
    <button class="navbtn" id="prevBtn">‚ü®</button>
    <button class="navbtn" id="nextBtn">‚ü©</button>
  </div>
</div>
</body>
</html>
