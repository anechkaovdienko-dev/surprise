<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–°—é—Ä–ø—Ä–∏–∑</title>

<script type="module">
import confetti from "https://cdn.skypack.dev/canvas-confetti"; 

// ---------- –õ–æ–≥–∏–∫–∞ –°–ª–∞–π–¥–æ–≤ ----------
const images = [
  "https://i.ibb.co/6cW8qM6N/IMG-5629.jpg",
  "https://i.ibb.co/qFYK3VRC/IMG-5628.jpg"
];

let current = 0;
let autoSlideTimeout = null;

function renderImagesIfNeeded() {
  const slidesContainer = document.getElementById("slides");
  if (slidesContainer.querySelectorAll(".img").length === 0) {
    images.forEach(src => {
      const img = document.createElement("img");
      img.src = src;
      img.className = "img";
      slidesContainer.querySelector(".slide-wrapper").appendChild(img);
    });
  }
}

function showImage(idx) {
  renderImagesIfNeeded();
  const slidesContainer = document.getElementById("slides");
  const imgList = slidesContainer.querySelectorAll(".img");
  imgList.forEach((img, i) => {
    if (i === idx) img.classList.add("active");
    else img.classList.remove("active");
  });
}

function showPrev() {
  current = (current - 1 + images.length) % images.length;
  showImage(current);
  setupAutoSlide();
}

function showNext() {
  current = (current + 1) % images.length;
  showImage(current);
  setupAutoSlide();
}

function setupAutoSlide() {
  clearAutoSlide();
  autoSlideTimeout = setTimeout(function autoSlideFn() {
    current = (current + 1) % images.length;
    showImage(current);
    autoSlideTimeout = setTimeout(autoSlideFn, 5000);
  }, 5000);
}

function clearAutoSlide() {
  if (autoSlideTimeout) clearTimeout(autoSlideTimeout);
}

// ---------- –õ–æ–≥–∏–∫–∞ –û—Ç–∫—Ä—ã—Ç–∏—è (–ß–∏—Å—Ç—ã–π JavaScript) ----------

const CORRECT_PASS = "2802";

function shakeModal() {
    const modal = document.getElementById('passwordModal');
    modal.classList.add('shake-error');
    setTimeout(() => {
        modal.classList.remove('shake-error');
    }, 500);
}


function claim() {
    // 1. –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–ø–ª–∞–≤–Ω–æ)
    document.getElementById('mainContent').style.opacity = '0';
    setTimeout(() => {
        document.getElementById('mainContent').hidden = true;
    }, 500);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª
    const modal = document.getElementById('passwordModal');
    modal.style.display = 'flex';
    setTimeout(() => { modal.style.opacity = '1'; }, 10);

    document.getElementById('passwordInput').value = '';
    document.getElementById('passwordInput').focus();
}

function startConfettiAndSlides() {
    const emoji = document.getElementById('giftEmoji');
    const claimBtn = document.getElementById('claimBtn');
    const message = document.getElementById('giftMessage');
    const mainContent = document.getElementById('mainContent');
    const slidesContainer = document.getElementById("slides");

    mainContent.hidden = false;
    mainContent.style.opacity = '1'; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å

    // –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã–≤–∞–Ω–∏—è
    emoji.classList.remove("joggle");
    void emoji.offsetWidth;
    emoji.classList.add("gift-box__emoji--claimed");
    claimBtn.hidden = true;

    // 3. –ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    setTimeout(() => {
        message.classList.remove("gift-box__message--hidden");
        emoji.hidden = true;
        
        // üî• –ö–û–ù–§–ï–¢–¢–ò
        const confettiLayer = document.createElement("canvas");
        confettiLayer.style.position = "fixed";
        confettiLayer.style.top = 0;
        confettiLayer.style.left = 0;
        confettiLayer.style.width = "100vw";
        confettiLayer.style.height = "100vh";
        confettiLayer.style.pointerEvents = "none";
        confettiLayer.style.zIndex = "10001";
        document.body.appendChild(confettiLayer);

        confetti.create(confettiLayer, { resize: true })({
            particleCount: 200, 
            spread: 150,
            origin: { y: 0.3 } 
        });

        // –ü–æ–∫–∞–∑ —Å–ª–∞–π–¥–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, –Ω–æ —Ä–µ–∑–∫–æ)
        slidesContainer.style.display = "flex";

        // –°–∫—Ä—ã–≤–∞–µ–º mainContent, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª
        mainContent.hidden = true;
        
        current = 0;
        showImage(current); 
        setupAutoSlide();
        
        // –£–¥–∞–ª—è–µ–º Canvas –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è
        setTimeout(() => {
             document.body.removeChild(confettiLayer);
        }, 3000);
        
    }, 500);
}


function checkPassword() {
    const passwordInput = document.getElementById('passwordInput');
    const userPass = passwordInput.value;

    if (userPass.length !== 4) {
        shakeModal();
        alert("–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–æ–≤–Ω–æ 4 —Ü–∏—Ñ—Ä—ã.");
        return;
    }

    if (userPass !== CORRECT_PASS) {
        shakeModal();
        alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
        passwordInput.value = '';
        return;
    }

    document.getElementById('passwordModal').style.display = 'none';
    document.getElementById('passwordModal').style.opacity = '0';
    startConfettiAndSlides();
}

function handleKeydown(event) {
    if (event.key === 'Enter') {
        checkPassword();
    }
}

function handlePasswordInput(event) {
    if (event.target.value.length === 4) {
        checkPassword();
    }
}


document.addEventListener("DOMContentLoaded", () => {
    renderImagesIfNeeded(); 
    
    document.getElementById("prevBtn").addEventListener("click", showPrev);
    document.getElementById("nextBtn").addEventListener("click", showNext);
    document.getElementById("claimBtn").addEventListener("click", claim);
    document.getElementById("modalOpenBtn").addEventListener("click", checkPassword);
    document.getElementById("passwordInput").addEventListener("keydown", handleKeydown);
    document.getElementById("passwordInput").addEventListener("input", handlePasswordInput); 
});

</script>

<style>
/* ------------------------------------------------------------------ */
/* CSS –ê–ù–ò–ú–ê–¶–ò–ò (—Ä–∞–±–æ—á–∏–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä) */
/* ------------------------------------------------------------------ */

@keyframes pulse {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
    70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-10px); }
    40%, 80% { transform: translateX(10px); }
}


body {
  font-family: "Lucida Grande", sans-serif;
  margin: 0;
  /* –ü–õ–ê–í–ù–´–ô –†–ê–î–ò–ê–õ–¨–ù–´–ô –ì–†–ê–î–ò–ï–ù–¢ */
  background: radial-gradient(circle at center, #ffdbf0 0%, #ffe6f0 80%, #ffc5d8 100%); 
  overflow: hidden;
}

/* ---------- –ö–æ—Ä–æ–±–∫–∞ (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä) ---------- */
.mt-40 { 
  margin-top: 5rem; 
  text-align: center; 
  /* –ü–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
  transition: opacity 0.5s ease;
}
.joggle { animation: joggle 4.5s ease-in-out infinite; }
.gift-box__emoji { font-size: 13em; }
.gift-box__btn {
  font-size: 2em;
  margin-top: 1em;
  background: red;
  color: white;
  border: none;
  padding: 14px 28px;
  border-radius: 14px;
  cursor: help; 
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
}
.gift-box__emoji--claimed { transition: transform 500ms ease; transform: scale(1.6) rotate(12deg); }
.gift-box__message { margin-top: 1.5em; font-size: 2em; transition: all 500ms ease; }
.gift-box__message--hidden { opacity: 0; transform: scale(0.95); }
@keyframes joggle { 0%,33%,100%{transform:rotate(0deg);} 3.33%{transform:rotate(-10deg);} 6.67%{transform:rotate(12deg);} 10%{transform:rotate(-10deg);} 13.33%{transform:rotate(9deg);} 16.67%{transform:rotate(0deg);} }

/* ------------------------------------------------------------------ */
/* –°–¢–ò–õ–ò –î–õ–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –ü–ê–†–û–õ–Ø */
#passwordModal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    display: none; 
    opacity: 0; 
    transition: opacity 0.3s ease, transform 0.1s linear;
}

/* –ö–õ–ê–°–° –î–õ–Ø –¢–†–Ø–°–ö–ò */
#passwordModal.shake-error {
    animation: shake 0.5s;
}

.password-box {
    background: white;
    padding: 30px;
    border-radius: 14px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    font-size: 1.2em;
}

.password-box p {
    margin-top: 0;
    font-size: 1.5em;
    color: #333;
}

#passwordInput {
    font-size: 2em;
    width: 120px; 
    text-align: center;
    padding: 10px 5px;
    margin-bottom: 20px;
    border: 2px solid #ccc;
    border-radius: 12px; 
    letter-spacing: 5px; 
}

.password-box button {
    font-size: 1.2em;
    background: red;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 0 0 rgba(255, 0, 0, 0);
    animation: pulse 2s infinite;
}
/* ------------------------------------------------------------------ */


/* ---------- –°–ª–∞–π–¥—ã ‚Äî –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω ---------- */
#slides {
  /* –û—Å—Ç–∞–≤–ª—è–µ–º display: none –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ª–æ–≥–∏–∫–∏ */
  display: none; 
  
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background: #ffe6f0;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  z-index: 9999;
}

/* –ö–û–ù–¢–ï–ô–ù–ï–†-–û–ë–ï–†–¢–ö–ê –î–õ–Ø –ö–ê–†–¢–ò–ù–ö–ò –ò –ö–ù–û–ü–û–ö */
.slide-wrapper {
  position: relative; 
  width: 90%;
  height: 90%;
  display: flex;
  justify-content: center;
  align-items: center;
  
  /* –¢–û–ù–ö–ê–Ø "–ë–ï–õ–ê–Ø –†–ê–ú–ö–ê" –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ */
  padding: 0 10px; 
}

.img {
  position: absolute;
  width: 100%; 
  height: 100%;
  object-fit: contain;
  opacity: 0;
  /* –ü–õ–ê–í–ù–û–°–¢–¨ –°–ú–ï–ù–´ –°–õ–ê–ô–î–û–í (2 —Å–µ–∫—É–Ω–¥—ã) */
  transition: opacity 2s ease; 
}
.img.active { opacity: 1; }

/* ---------- –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è ‚Äî –∫—Ä–∞—Å–Ω—ã–µ ---------- */
.navbtn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: red;
  color: white;
  border: none;
  /* –ú–ê–õ–ï–ù–¨–ö–ò–ô –†–ê–ó–ú–ï–† –ö–ù–û–ü–ö–ò */
  font-size: 24px; 
  border-radius: 14px;
  /* –£–ú–ï–ù–¨–®–ï–ù–ù–´–ô PADDING */
  padding: 0 10px; 
  cursor: pointer;
  z-index: 10000;
  opacity: 0.8;
  /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
  transition: opacity 0.2s ease, transform 0.2s ease;
}
.navbtn:hover { opacity: 1; transform: translateY(-50%) scale(1.05); }

/* –ö–Ω–æ–ø–∫–∏ –ø—Ä–∏–∂–∏–º–∞—é—Ç—Å—è –∫ –∫—Ä–∞—é –¢–û–ù–ö–û–ô –†–ê–ú–ö–ò */
#prevBtn { left: 0; }   
#nextBtn { right: 0; }

/* ---------- –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ ---------- */
@media (max-width: 600px) {
    /* –£–ú–ï–ù–¨–®–ï–ù–ê –ú–û–ë–ò–õ–¨–ù–ê–Ø –†–ê–ú–ö–ê */
    .slide-wrapper {
      padding: 0 5%; 
    }
    
  .navbtn {
    /* –ú–ê–õ–ï–ù–¨–ö–ò–ô –†–ê–ó–ú–ï–† –ö–ù–û–ü–ö–ò */
    font-size: 20px;
    padding: 0 8px;
    opacity: 0.5;
  }
  
  /* –ö–Ω–æ–ø–∫–∏ –ø—Ä–∏–∂–∏–º–∞—é—Ç—Å—è –∫ –∫—Ä–∞—é –¢–û–ù–ö–û–ô –†–ê–ú–ö–ò */
  #prevBtn { left: 0; }   
  #nextBtn { right: 0; }
  
  .gift-box__emoji { font-size: 9em; }
  .gift-box__btn { font-size: 1.5em; }
  
  /* –ê–î–ê–ü–¢–ê–¶–ò–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• */
  .password-box {
      padding: 20px;
  }
  .password-box p {
      font-size: 1.2em;
  }
  #passwordInput {
      font-size: 1.5em;
      width: 100px;
  }
}
</style>
</head>

<body>
<div id="mainContent" class="mt-40">
  <div class="gift-box">
    <div id="giftEmoji" class="gift-box__emoji joggle">üéÅ</div>
    <button id="claimBtn" class="gift-box__btn">
      –ù–ï –û–¢–ö–†–´–í–ê–ô –ö–û–†–û–ë–ö–£!
    </button>
  </div>
  
  <div id="giftMessage" class="gift-box__message gift-box__message--hidden"></div>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –ü–ê–†–û–õ–Ø (–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–æ) -->
<div id="passwordModal">
    <div class="password-box">
        <p>–î–∞—Ç–∞ –º–æ–µ–≥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è:</p>
        <input 
            type="password" 
            id="passwordInput" 
            maxlength="4" 
            placeholder="–î–î–ú–ú"
        >
        <button id="modalOpenBtn">–û—Ç–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<!-- ---------- –°–ª–∞–π–¥—ã ---------- -->
<div id="slides">
  <div class="slide-wrapper">
    <button class="navbtn" id="prevBtn">‚ü®</button>
    <button class="navbtn" id="nextBtn">‚ü©</button>
  </div>
</div>
</body>
</html>
